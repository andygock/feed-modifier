(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function X(){}function ye(e,t){for(const n in t)e[n]=t[n];return e}function ie(e){return e()}function se(){return Object.create(null)}function P(e){e.forEach(ie)}function $(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ge(e){return Object.keys(e).length===0}function ve(e,t,n,r){if(e){const s=ae(e,t,n,r);return e[0](s)}}function ae(e,t,n,r){return e[1]&&r?ye(n.ctx.slice(),e[1](r(t))):n.ctx}function be(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const l=[],f=Math.max(t.dirty.length,s.length);for(let u=0;u<f;u+=1)l[u]=t.dirty[u]|s[u];return l}return t.dirty|s}return t.dirty}function we(e,t,n,r,s,l){if(s){const f=ae(t,n,r,l);e.p(f,s)}}function Ae(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function K(e){return e==null?"":e}function w(e,t){e.appendChild(t)}function b(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function A(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function j(){return O(" ")}function D(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ee(e){return e===""?null:+e}function Fe(e){return Array.from(e.childNodes)}function oe(e,t){t=""+t,e.data!==t&&(e.data=t)}function C(e,t){e.value=t==null?"":t}function Te(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function xe(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,r,t),s}let U;function z(e){U=e}function De(){if(!U)throw new Error("Function called outside component initialization");return U}function Le(){const e=De();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const l=xe(t,n,{cancelable:r});return s.slice().forEach(f=>{f.call(e,l)}),!l.defaultPrevented}return!0}}const q=[],le=[];let N=[];const fe=[],ke=Promise.resolve();let Y=!1;function Be(){Y||(Y=!0,ke.then(ce))}function Z(e){N.push(e)}const W=new Set;let M=0;function ce(){if(M!==0)return;const e=U;do{try{for(;M<q.length;){const t=q[M];M++,z(t),je(t.$$)}}catch(t){throw q.length=0,M=0,t}for(z(null),q.length=0,M=0;le.length;)le.pop()();for(let t=0;t<N.length;t+=1){const n=N[t];W.has(n)||(W.add(n),n())}N.length=0}while(q.length);for(;fe.length;)fe.pop()();Y=!1,W.clear(),z(e)}function je(e){if(e.fragment!==null){e.update(),P(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}function Oe(e){const t=[],n=[];N.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),N=t}const I=new Set;let Me;function ee(e,t){e&&e.i&&(I.delete(e),e.i(t))}function de(e,t,n,r){if(e&&e.o){if(I.has(e))return;I.add(e),Me.c.push(()=>{I.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function qe(e){e&&e.c()}function pe(e,t,n,r){const{fragment:s,after_update:l}=e.$$;s&&s.m(t,n),r||Z(()=>{const f=e.$$.on_mount.map(ie).filter($);e.$$.on_destroy?e.$$.on_destroy.push(...f):P(f),e.$$.on_mount=[]}),l.forEach(Z)}function _e(e,t){const n=e.$$;n.fragment!==null&&(Oe(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ce(e,t){e.$$.dirty[0]===-1&&(q.push(e),Be(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,r,s,l,f,u=[-1]){const a=U;z(e);const i=e.$$={fragment:null,ctx:[],props:l,update:X,not_equal:s,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:se(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};f&&f(i.root);let F=!1;if(i.ctx=n?n(e,t.props||{},(p,E,...v)=>{const T=v.length?v[0]:E;return i.ctx&&s(i.ctx[p],i.ctx[p]=T)&&(!i.skip_bound&&i.bound[p]&&i.bound[p](T),F&&Ce(e,p)),E}):[],i.update(),F=!0,P(i.before_update),i.fragment=r?r(i.ctx):!1,t.target){if(t.hydrate){const p=Fe(t.target);i.fragment&&i.fragment.l(p),p.forEach(g)}else i.fragment&&i.fragment.c();t.intro&&ee(e.$$.fragment),pe(e,t.target,t.anchor,t.customElement),ce()}z(a)}class he{$destroy(){_e(this,1),this.$destroy=X}$on(t,n){if(!$(n))return X;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ne(e){let t,n,r,s,l;const f=e[10].default,u=ve(f,e,e[9],null);return{c(){t=A("span"),u&&u.c(),Te(t,"--color-hover",e[0]),h(t,"class",n=K(e[1]?"drop-hover":"drop")+" svelte-4euw9y")},m(a,i){b(a,t,i),u&&u.m(t,null),r=!0,s||(l=[D(t,"drop",e[2]),D(t,"dragover",e[3]),D(t,"dragleave",e[4])],s=!0)},p(a,[i]){u&&u.p&&(!r||i&512)&&we(u,f,a,a[9],r?be(f,a[9],i,null):Ae(a[9]),null),(!r||i&2&&n!==(n=K(a[1]?"drop-hover":"drop")+" svelte-4euw9y"))&&h(t,"class",n)},i(a){r||(ee(u,a),r=!0)},o(a){de(u,a),r=!1},d(a){a&&g(t),u&&u.d(a),s=!1,P(l)}}}function Pe(e,t,n){let{$$slots:r={},$$scope:s}=t;const l=Le();let{readAsBuffer:f=!1}=t,{readAsText:u=!1}=t,{readAsArray:a=!1}=t,{multi:i=!1}=t;const F="palegreen";let p=!1;const E=async o=>{const y=await o.arrayBuffer(),d=new Uint8Array(y);l("read",{data:d,file:o})},v=async o=>{const y=await o.text();l("read",{data:y,file:o})},T=async o=>{const d=(await o.text()).split(/\r?\n/);l("read",{data:d,file:o})},L=o=>{if(l("drop",o),o.preventDefault(),n(1,p=!1),o.dataTransfer.items){if(!i&&o.dataTransfer.items.length>1){alert("Error: Multiple file drops not supported.");return}for(let y=0;y<o.dataTransfer.items.length;y++)if(o.dataTransfer.items[y].kind==="file"){let d=o.dataTransfer.items[y].getAsFile();l("file",d),f&&E(d),u&&v(d),a&&T(d)}}},B=o=>{o.preventDefault(),p||n(1,p=!0)},_=o=>{o.preventDefault(),n(1,p=!1)};return e.$$set=o=>{"readAsBuffer"in o&&n(5,f=o.readAsBuffer),"readAsText"in o&&n(6,u=o.readAsText),"readAsArray"in o&&n(7,a=o.readAsArray),"multi"in o&&n(8,i=o.multi),"$$scope"in o&&n(9,s=o.$$scope)},[F,p,L,B,_,f,u,a,i,s,r]}class He extends he{constructor(t){super(),me(this,t,Pe,Ne,ue,{readAsBuffer:5,readAsText:6,readAsArray:7,multi:8,colorHover:0})}get colorHover(){return this.$$.ctx[0]}}function Re(e){let t,n,r;return{c(){t=A("textarea"),h(t,"id","before"),h(t,"cols","80"),h(t,"rows","25"),h(t,"placeholder","Drag and drop input file here"),h(t,"class","svelte-160qcfv")},m(s,l){b(s,t,l),C(t,e[1]),n||(r=D(t,"input",e[11]),n=!0)},p(s,l){l&2&&C(t,s[1])},d(s){s&&g(t),n=!1,r()}}}function Se(e){let t,n,r,s,l,f,u,a=Math.round(e[4]*100)+"",i,F,p,E,v,T,L,B,_,o,y,d,x,H,R,te,G=e[3].join(" ")+"",J,Q,S,k,V,ne;return o=new He({props:{readAsText:!0,$$slots:{default:[Re]},$$scope:{ctx:e}}}),o.$on("drop",e[12]),o.$on("file",e[5]),o.$on("read",e[6]),{c(){t=A("h2"),t.textContent="Feed rate modifier for G-code",n=j(),r=A("div"),s=A("input"),l=j(),f=A("span"),u=O("Feed modifier "),i=O(a),F=O("%"),p=j(),E=A("div"),v=A("button"),T=O("Download output"),B=j(),_=A("div"),qe(o.$$.fragment),y=j(),d=A("textarea"),H=j(),R=A("div"),te=O("Following feedrates were found in input data: "),J=O(G),Q=j(),S=A("footer"),S.innerHTML='<a href="https://github.com/andygock/feed-modifier">GitHub</a>',h(s,"type","range"),h(s,"min","0.10"),h(s,"max","4.00"),h(s,"step","0.02"),h(s,"class","svelte-160qcfv"),h(r,"class","input svelte-160qcfv"),v.disabled=L=e[1]==="",h(d,"class",x=K(e[1]===""?"hide":"")+" svelte-160qcfv"),h(d,"id","after"),h(d,"cols","80"),h(d,"rows","25"),h(S,"class","svelte-160qcfv")},m(c,m){b(c,t,m),b(c,n,m),b(c,r,m),w(r,s),C(s,e[4]),w(r,l),w(r,f),w(f,u),w(f,i),w(f,F),b(c,p,m),b(c,E,m),w(E,v),w(v,T),b(c,B,m),b(c,_,m),pe(o,_,null),w(_,y),w(_,d),C(d,e[2]),b(c,H,m),b(c,R,m),w(R,te),w(R,J),b(c,Q,m),b(c,S,m),k=!0,V||(ne=[D(s,"change",e[9]),D(s,"input",e[9]),D(s,"change",function(){$(e[7](e[1]))&&e[7](e[1]).apply(this,arguments)}),D(v,"click",e[10]),D(d,"input",e[13])],V=!0)},p(c,[m]){e=c,m&16&&C(s,e[4]),(!k||m&16)&&a!==(a=Math.round(e[4]*100)+"")&&oe(i,a),(!k||m&2&&L!==(L=e[1]===""))&&(v.disabled=L);const re={};m&16386&&(re.$$scope={dirty:m,ctx:e}),o.$set(re),(!k||m&2&&x!==(x=K(e[1]===""?"hide":"")+" svelte-160qcfv"))&&h(d,"class",x),m&4&&C(d,e[2]),(!k||m&8)&&G!==(G=e[3].join(" ")+"")&&oe(J,G)},i(c){k||(ee(o.$$.fragment,c),k=!0)},o(c){de(o.$$.fragment,c),k=!1},d(c){c&&g(t),c&&g(n),c&&g(r),c&&g(p),c&&g(E),c&&g(B),c&&g(_),_e(o),c&&g(H),c&&g(R),c&&g(Q),c&&g(S),V=!1,P(ne)}}}function ze(e,t,n){let r=[],s="",l="",f=[],u=1;const a=({detail:_})=>{},i=({detail:{data:_,file:o}})=>{r.push({name:o.name,size:o.size,data:_}),n(0,r),n(1,s=_),F(_)},F=_=>{const y=_.split(/\r?\n/).map(d=>{const x=d.match(/F([+-]?([0-9]*[.])?[0-9]+)/);if(x){f.includes(x[1])||(f.push(x[1]),n(3,f));const H=x[1]*u;return d.replace(/F([+-]?([0-9]*[.])?[0-9]+)/,`F${H.toFixed(2)}`).replace(/\.+$/,"")}else return d});n(2,l=y.join(`
`))},p=()=>{const _=document.createElement("a"),o=new Blob([l],{type:"text/plain"});_.href=URL.createObjectURL(o);const y=r[0].name.replace(/(\.[^/.]+)$/,"-modified$1");_.download=y,document.body.appendChild(_),_.click()};function E(){u=Ee(this.value),n(4,u)}const v=()=>{p()};function T(){s=this.value,n(1,s)}const L=()=>{n(0,r=[]),n(0,r),n(3,f=[])};function B(){l=this.value,n(2,l)}return[r,s,l,f,u,a,i,F,p,E,v,T,L,B]}class Ue extends he{constructor(t){super(),me(this,t,ze,Se,ue,{})}}new Ue({target:document.getElementById("app")});
